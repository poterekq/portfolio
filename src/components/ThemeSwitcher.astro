---
import IconButton from "./IconButton.astro"
---

<IconButton id="theme-toggle">
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height:28px;width:28px" class="fill-neutral-800" viewBox="0 0 256 256"><path d="M240,80H224V64a8,8,0,0,0-16,0V80H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V96h16a8,8,0,0,0,0-16Z"></path><path d="M152,48h8v8a8,8,0,0,0,16,0V48h8a8,8,0,0,0,0-16h-8V24a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16Z"></path><path d="M216.5,144.6l-2.2.4A84,84,0,0,1,111,41.6a5.7,5.7,0,0,0,.3-1.8,8,8,0,0,0-5-7.9,7.8,7.8,0,0,0-5.2-.2A100,100,0,1,0,224.3,154.9a7.9,7.9,0,0,0,0-4.8A8.2,8.2,0,0,0,216.5,144.6Z"></path></svg>
</IconButton>

<script is:inline>
  let theme = localStorage.getItem('theme')
  const $themeToggle = document.querySelector('#theme-toggle')

  const enableDarkMode = () => {
    document.documentElement.classList.add('dark')
    $themeToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height:28px;width:28px" class="fill-neutral-200" viewBox="0 0 256 256"><circle cx="128" cy="128" r="68"></circle><path d="M128,44a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V36A8,8,0,0,0,128,44Z"></path><path d="M57.3,68.6a8.1,8.1,0,0,0,11.3,0,8,8,0,0,0,0-11.3L54.5,43.1A8.1,8.1,0,1,0,43.1,54.5Z"></path><path d="M44,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H36A8,8,0,0,0,44,128Z"></path><path d="M57.3,187.4,43.1,201.5a8.1,8.1,0,0,0,0,11.4,8.5,8.5,0,0,0,5.7,2.3,8.3,8.3,0,0,0,5.7-2.3l14.1-14.2a8,8,0,0,0-11.3-11.3Z"></path><path d="M128,212a8,8,0,0,0-8,8v20a8,8,0,0,0,16,0V220A8,8,0,0,0,128,212Z"></path><path d="M198.7,187.4a8,8,0,0,0-11.3,11.3l14.1,14.2a8.3,8.3,0,0,0,5.7,2.3,8.5,8.5,0,0,0,5.7-2.3,8.1,8.1,0,0,0,0-11.4Z"></path><path d="M240,120H220a8,8,0,0,0,0,16h20a8,8,0,0,0,0-16Z"></path><path d="M193.1,70.9a7.8,7.8,0,0,0,5.6-2.3l14.2-14.1a8.1,8.1,0,0,0-11.4-11.4L187.4,57.3a8,8,0,0,0,0,11.3A7.8,7.8,0,0,0,193.1,70.9Z"></path></svg>`
    localStorage.setItem('theme', 'dark')
  }
  const disableDarkMode = () => {
    document.documentElement.classList.remove('dark')
    $themeToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="height:28px;width:28px" class="fill-neutral-800" viewBox="0 0 256 256"><path d="M240,80H224V64a8,8,0,0,0-16,0V80H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V96h16a8,8,0,0,0,0-16Z"></path><path d="M152,48h8v8a8,8,0,0,0,16,0V48h8a8,8,0,0,0,0-16h-8V24a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16Z"></path><path d="M216.5,144.6l-2.2.4A84,84,0,0,1,111,41.6a5.7,5.7,0,0,0,.3-1.8,8,8,0,0,0-5-7.9,7.8,7.8,0,0,0-5.2-.2A100,100,0,1,0,224.3,154.9a7.9,7.9,0,0,0,0-4.8A8.2,8.2,0,0,0,216.5,144.6Z"></path></svg>`
    localStorage.setItem('theme', null)
  }
  
  if (theme === 'dark') enableDarkMode()
  $themeToggle.addEventListener('click', () => {
    theme = localStorage.getItem('theme')
    theme !== 'dark'
      ? enableDarkMode()
      : disableDarkMode()
  })
</script>