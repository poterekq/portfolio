var f={};Object.defineProperty(f,"__esModule",{value:!0});var p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function g(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var w=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=e.parent,n=void 0===i?document.querySelector("#isolde"):i,r=e.links,a=void 0===r?document.querySelectorAll("[data-isolde-link]"):r,s=e.active,o=void 0===s?"is-active":s,l=e.margin,u=void 0===l?20:l,c=e.responsive,d=void 0===c?{980:{columns:3},480:{columns:2},0:{columns:1}}:c,h=e.fadeDuration,f=void 0===h?{in:300,out:0}:h;k(this,t),this.parent=n,this.links=Array.from(a),this.active=o,this.margin=u,this.responsive=d,this.fadeDuration=f,this.elements=Array.from(this.parent.children),this.activeElements=this.elements,this.columns=1,this.dataLink="all",this.winWidth=window.innerWidth,this.init()}return p(t,[{key:"orderelements",value:function(){var t=this,e=this.parent,i=this.activeElements,n=this.columns,r=this.blocWidth,a=(this.responsive,this.margin),s=i.reduce((function(e,i,s){var o=t._sumArrHeight(e,n),l=s%n*(r+a),u=0<=s-n?o[s%n]+a*Math.floor(s/n):0;return i.style.transform="translate3d("+l+"px, "+u+"px, 0)",e.push(i.offsetHeight),e}),[]),o=this._sumArrHeight(s,n),l=Math.max.apply(Math,g(o))+a*(Math.floor(i.length/n)-1);e.style.height=l+"px"}},{key:"handleFilterClick",value:function(t,e){var i=this;t.preventDefault();var n=this.links,r=this.active;e.dataset.isoldeLink!==this.dataLink&&(this.dataLink=e.dataset.isoldeLink,n.forEach((function(t){t.isEqualNode(e)?t.classList.add(r):t.classList.remove(r)})),this._filterElements((function(){i.orderelements()})))}},{key:"resize",value:function(){var t=this;window.addEventListener("resize",(function(){clearTimeout(window.sortableResize),window.sortableResize=setTimeout((function(){t.winWidth=window.innerWidth,t._setBlocWidth((function(){t.orderelements()}))}),500)}))}},{key:"init",value:function(){var t=this,e=this.parent,i=this.links,n=this.active;i.forEach((function(e,i){0===i&&(e.classList.add(n),t.dataLink=e.dataset.isoldeLink),e.addEventListener("click",(function(i){t.handleFilterClick(i,e)}))})),this._setBlocWidth(),window.addEventListener("load",(function(){t._filterElements((function(){t.orderelements()})),e.style.opacity=1})),this.resize()}},{key:"_setBlocWidth",value:function(t){var e=this.parent,i=this.elements,n=this.margin,r=this.responsive,a=this.columns=this._columnsCount(r).columns,s=this.blocWidth=(e.clientWidth-n*(a-1))/a;i.forEach((function(t){t.style.width=s+"px"})),t&&t()}},{key:"_filterElements",value:function(t){var e=this,i=this.elements,n=this.dataLink,r=this.fadeDuration;this.activeElements=i.filter((function(t){return"all"===n?(e._fadeIn(t,r.in),!0):t.dataset.isoldeEl!==n?(e._fadeOut(t,r.out),!1):(e._fadeIn(t,r.in),!0)})),t&&t()}},{key:"_sumArrHeight",value:function(t,e){return t.reduce((function(t,i,n){var r=n%e;return t[r]||(t[r]=0),t[r]=t[r]+i,t}),[])}},{key:"_columnsCount",value:function(t){var e=this.winWidth;return Object.entries(t).reduce((function(t,i){return e>i[0]&&i[0]>=Math.max(t.width)?{width:i[0],columns:i[1].columns}:t}),{width:0,columns:4})}},{key:"_fadeIn",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300,i=arguments[2],n=parseFloat(window.getComputedStyle(t,null).getPropertyValue("opacity")),r=16/e;t.style.display="block",requestAnimationFrame((function e(){(n+=r)<=1?(t.style.opacity=n,requestAnimationFrame(e)):(t.style.opacity=1,i&&i())}))}},{key:"_fadeOut",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300,i=arguments[2],n=parseFloat(window.getComputedStyle(t,null).getPropertyValue("opacity")),r=e?16/e:1;requestAnimationFrame((function e(){0<=(n-=r)?(t.style.opacity=n,requestAnimationFrame(e)):(t.style.opacity=0,t.style.display="none",i&&i())}))}}]),t}();f.default=w;const _=f.default;var A=_;new A({parent:document.querySelector("#masonry-grid"),links:document.querySelectorAll("[data-isolde-link]"),active:"grid-filter-active",fadeDuration:{in:150,out:0},responsive:{980:{columns:3},560:{columns:2},180:{columns:1}}});